<div style="display: inline;">

    <div *ngIf="appDataService.currentSearchView == 'Multiple'" style="display:inline">
        <button id="refreshgridID" (click)="refreshData()" class="table-button">
            <img title="Refresh" src="assets/Images/table-icons/refresh.png" class="sizeIcon" /> Refresh
        </button>
        <button (click)="SelectAll(true)" class="table-button">
            <img title="Select All" src="assets/Images/table-icons/selectall.png" class="sizeIcon" /> Select All
        </button>
        <button (click)="SelectAll(false)" class="table-button">
            <img title="Unselect All" src="assets/Images/table-icons/unselectall.png" class="sizeIcon" /> Unselect All
        </button>

        <span style="color:black" class="layercontrolBar"><strong>{{checkedCount}} row(s) selected</strong></span>
    </div>


    <button *ngIf="toolPermission.ASSIGN_ANY || toolPermission.ASSIGN_VENDOR_ONLY || toolPermission.ASSIGN_SELF"
        [disabled]="!enableTool['ASSIGN']" [class.disabled]="!enableTool['ASSIGN']"
        [title]="!enableTool['ASSIGN'] ? 'Can only assign if the status is RECEIVED or FIXED, and has not already been Assigned'   : 'Assign Work Order'"
        (click)="assignWorkOrderToolInit()" type="button" class="table-button">
        Assign
    </button>

    <button *ngIf="toolPermission.COMPLETE" [disabled]="!enableTool['COMPLETE']"
        [class.disabled]="!enableTool['COMPLETE']"
        [title]="!enableTool['COMPLETE'] ? 'Set Work Order to Complete. Current Work Order must not already be completed and must be assigned.'   : 'Set Work Order to Complete'"
        (click)="completeToolInit()" type="button" class="table-button">
        Complete
    </button>

    <button *ngIf="toolPermission.PROBLEM" [disabled]="!enableTool['PROBLEM']" [class.disabled]="!enableTool['PROBLEM']"
        [title]="!enableTool['PROBLEM'] ? 'Set Problem for Work Order. Can not set with order is CLOSED or not ASSIGNED'   : 'Set Work Order to PROBLEM'"
        (click)="problemToolInit()" type="button" class="table-button">
        Problem
    </button>

    <button *ngIf="toolPermission.CLOSED_PROBLEM" [disabled]="!enableTool['CLOSEDPROBLEM']"
        [class.disabled]="!enableTool['CLOSEDPROBLEM']"
        [title]="!enableTool['CLOSEDPROBLEM'] ? 'Closed Problem for Work Order. Can not close if Work Order is not a PROBLEM status'   : 'Closed Problem for Work Order'"
        (click)="closedProblemToolInit()" type="button" class="table-button">
        Closed Problem
    </button>


    <button *ngIf="toolPermission.CNFA" [disabled]="!enableTool['CNFA']" [class.disabled]="!enableTool['CNFA']"
        [title]="!enableTool['CNFA'] ? 'Update Closed No Further Action. Work Order Status Must first be PROBLEM or RECEIVED'   : 'Update to Closed No Further Action'"
        (click)="CNFAToolInit()" type="button" class="table-button">
        CNFA
    </button>
    <!--     
    <button  *ngIf="toolPermission.FIXED"  [disabled]="!enableTool['FIXED']" [class.disabled]="!enableTool['FIXED']"
    [title]="!enableTool['FIXED'] ? 'Set Work Order to FIXED. Work Order Status Must first be PROBLEM'   : 'Update Work Order to FIXED'"
     (click)="openFixedTool()" type="button" class="table-button">
     Fixed
    </button>
    -->

    <button *ngIf="toolPermission.POSTABLE" [disabled]="!enableTool['POSTABLE']"
        [class.disabled]="!enableTool['POSTABLE']"
        [title]="!enableTool['POSTABLE'] ? 'Set Work Order to FIXED. Work Order Status Must first be PROBLEM'   : 'Update Work Order to FIXED'"
        (click)="postableToolInit()" type="button" class="table-button">
        Postable
    </button>


    <button *ngIf="toolPermission.ASSIGN_PROJECT" [disabled]="!enableTool['PROJECT']"
        [class.disabled]="!enableTool['PROJECT']"
        [title]="!enableTool['PROJECT'] ? 'Assign Project to Work Order'   : 'Assign Project to Work Order'"
        (click)="assignProjectToolInit()" type="button" class="table-button">
        Assign Project
    </button>


    <button *ngIf="toolPermission.EDIT_PACKET" [disabled]="!enableTool['PACKET']"
        [class.disabled]="!enableTool['PACKET']"
        [title]="!enableTool['PACKET'] ? 'Edit Packet. Can only Edit if the status is not COMPLETED or CNFA'   : 'Edit Packet'"
        (click)="editPacketToolInit()" type="button" class="table-button">
        Edit Packet
    </button>


    <button *ngIf="datasource != 'GAS' && toolPermission.RECEIVE_RELATED" [disabled]="!enableTool['RELATED']"
        [class.disabled]="!enableTool['RELATED']"
        [title]="!enableTool['RELATED'] ? 'Receive Related Order. '  : 'Receive Related Order'"
        (click)="relatedOrderToolInit()" type="button" class="table-button">
        Receive Related
    </button>

    <div style="display: inline">
        <button *ngIf="toolPermission.QC_ASSIGN" [disabled]="!enableTool['QC']" [class.disabled]="!enableTool['QC']"
            [title]="!enableTool['QC'] ? 'QC Assign. '  : 'QC Assign'" (click)="qcAssignInit()" type="button"
            class="table-button" style="background-color: blueviolet;">
            QC Assign
        </button>
        <button *ngIf="toolPermission.QC_PROBLEM" [disabled]="!enableTool['QC']" [class.disabled]="!enableTool['QC']"
            [title]="!enableTool['QC'] ? 'QC Problem. '  : 'QC Problem'" (click)="qcProblemInit()" type="button"
            class="table-button" style="background-color: blueviolet;">
            QC Problem
        </button>
        <button *ngIf="toolPermission.QC_COMPLETE" [disabled]="!enableTool['QC']" [class.disabled]="!enableTool['QC']"
            [title]="!enableTool['QC'] ? 'QC Problem Fixed. '  : 'QC Problem Fixed'" (click)="qcProblemFixedInit()" type="button"
            class="table-button" style="background-color: blueviolet;">
            QC Problem Fixed
        </button>
        <button *ngIf="toolPermission.QC_COMPLETE" [disabled]="!enableTool['QC']" [class.disabled]="!enableTool['QC']"
            [title]="!enableTool['QC'] ? 'QC Complete. '  : 'QC Complete'" (click)="qcCompleteInit()" type="button"
            class="table-button" style="background-color: blueviolet;">
            QC Complete
        </button>
    </div>

    <button *ngIf="toolPermission.REOPEN" [disabled]="!enableTool['REOPEN']" [class.disabled]="!enableTool['REOPEN']"
        [title]="!enableTool['REOPEN'] ? 'Reopen Work Order. Can only reopen if the status is COMPLETED or CNFA'   : 'Reopen Work Order'"
        (click)="reOpenToolInit()" type="button" class="table-button">
        Reopen
    </button>

    <!-- Remove -->
    <!--
    <button *ngIf="datasource != 'LANDBASE' && toolPermission.RELEASE_HOLD" [disabled]="!enableTool['HOLD']"
        [class.disabled]="!enableTool['HOLD']"
        [title]="!enableTool['HOLD'] ? 'Release On Hold. There are no existing on hold for this item.'  : 'Release On Hold'"
        (click)="holdToolInit()" type="button" class="table-button">
        Release Hold
    </button>
    -->

    <button *ngIf="appDataService.currentSearchView == 'Multiple'" (click)="exportDataInit()" class="table-button">
        Export To Excel
    </button>


    <button *ngIf="appDataService.currentSearchView == 'Multiple'" (click)="followSelected()" class="table-button">
        <img title="Follow" src="assets/Images/table-icons/follow.png" class="sizeIcon" />Follow
    </button>


    <button *ngIf="toolPermission.DELETE" [disabled]="!enableTool['DELETE']" [class.disabled]="!enableTool['DELETE']"
        [title]="!enableTool['DELETE'] ? 'Delete Work Order. Can only Edit if the status is not COMPLETED or CNFA'   : 'Delete Work Order'"
        (click)="deleteInit()" type="button" class="table-button table-button-delete">
        Delete
    </button>

</div>

<p-confirmPopup></p-confirmPopup>

<p-dialog *ngIf="exportData" header="Export To Excel" [style]="{'width': '500px'}" [(visible)]="showWindow['EXPORT']">

    <div>
        <div style="margin-top: 5px;">
            File Name
        </div>
        <input type="text" style="width: 100%;" styleClass="col-12" pInputText name="ExportName"
            [(ngModel)]="exportData.ExportName">


        <div style="margin-top: 5px;">
            <div>
                Export Option
            </div>
            <div>
                <div>
                    <p-radioButton label="Export Selected Items Only" name="ExportOption" value="Selection"
                        [(ngModel)]="exportData.ExportOption">
                    </p-radioButton>
                </div>
                <div>
                    <p-radioButton name="ExportOption" label="Export Entire Result" value="All"
                        [(ngModel)]="exportData.ExportOption"></p-radioButton>
                </div>
            </div>
        </div>


        <div style="float: right; margin-top: 10px;">
            <button class="search-cmd"  [disabled]="isSubmitting"  (click)="exportDataSubmit()">Export</button>
            <button class="search-cmd" style="margin-left: 10px;" (click)="showWindow = {}">Cancel</button>
            <br><br>
            <p-progressBar class="ToolRunning" mode="indeterminate" [hidden]="!isSubmitting" title="Running..."></p-progressBar>
            </div>
    </div>

</p-dialog>

<p-dialog *ngIf="commentsData" header="Comments(s) for {{commentsData.OrderNumber}}" [style]="{'width': '700px'}"
    [contentStyle]="{'height': '400px'}" [(visible)]="showWindow['COMMENTS']">

    <table class="table-view">
        <tr>
            <th>Comments</th>
            <th>Date</th>
            <th>By</th>
            <th>Vendor</th>
            <th>Order Status</th>
        </tr>
        <tr  *ngFor="let r of commentsData.CommentsList">
           
            <td>
                {{r.COMMENTS}}
            </td>
            <td>
                {{r.CREATEDDATE}}
            </td>
            <td>
                {{r.CREATEDBYNAME}}
            </td>
            <td>
                {{r.VENDOR}}
            </td>
            <td>
                {{r.STATUSDESCRIPTION}}
            </td>           
        </tr>
    </table>
  
    <div *ngIf="commentsData.CanEdit">
        <label class="DialogHeading" [ngClass]="{'ErrorMsg' : validationErrors?.Comments}">
            <div *ngIf="validationErrors?.Comments" class="Error" [title]="validationErrors?.Comments"></div>Add a New Comment<span class="dialog-require"></span></label>
        <textarea pInputTextarea rows="3" style="width: 100%;" [(ngModel)]="commentsData.Comments"></textarea>
        <button class="search-cmd" (click)="commentsSubmit()">Add</button>
    </div>

</p-dialog>

<p-dialog *ngIf="colData" header="Show/Hide Columns"  [style]="{'width': '500px', 'height': '400px'}" [contentStyle]="{'height': '400px'}"
    [(visible)]="showWindow['COLUMNS']" #overlayContainer>

    <div>

        <div>Choose the column(s) to display</div>
        <br>

        <div *ngFor="let c of colData">

            <p-checkbox name="groupname" [binary]="true" [ngModel]="!c.hidden" (onChange)="showColumnsChange(c, $event.checked)" [label]="c.header">
            </p-checkbox>
            <br>
    
        </div>


    </div>

</p-dialog>

<p-dialog *ngIf="followData" header="Follow Notification" [style]="{'width': '500px'}"
    [(visible)]="showWindow['FOLLOW']" #overlayContainer>

    <div>

        <div>Selected Order Number(s) - {{followData.checkedItems?.length}} Total</div>
        <span style="color: #336699">{{followData.checkedItemsList}}</span>
        <div style="color: red" *ngIf="!followData.checkedItems?.length">
            <div class="Error" [title]="validationErrors?.Selected"></div>No Work
            Order(s) were selected.
        </div>

        <div>
            Notify you when the follow Order Numbers Current Status has to changed to (check all that applies):

            <div style="display: inline;">
                <button style="font-size: 12px;" class="search-cmd" (click)="followToggle(true)">Follow All</button>
                <button style="font-size: 12px;margin-left: 10px;" class="search-cmd"
                    (click)="followToggle(false)">Un-follow All</button>
            </div>
        </div>
        <br>
        <p-checkbox name="groupname" value="A" [(ngModel)]="followData.Status" label="RECEIVED BY GIS">
        </p-checkbox>

        <br>

        <p-checkbox name="groupname" value="B" [(ngModel)]="followData.Status" label="PROBLEM">
        </p-checkbox>
        <br>

        <p-checkbox name="groupname" value="C" [(ngModel)]="followData.Status" label="FIXED">
        </p-checkbox>
        <br>

        <p-checkbox name="groupname" value="R" [(ngModel)]="followData.Status" label="CLOSED PROBLEM">
        </p-checkbox>
        <br>

        <p-checkbox name="groupname" value="Y" [(ngModel)]="followData.Status" label="CLOSED NO FURTHER ACTION">
        </p-checkbox>
        <br>

        <p-checkbox name="groupname" value="Z" [(ngModel)]="followData.Status" label="COMPLETED IN GIS">
        </p-checkbox>
        <br>


        <p-checkbox name="groupname" value="QCA" [(ngModel)]="followData.Status" label="QC ASSIGNED">
        </p-checkbox>
        <br>

        <p-checkbox name="groupname" value="QCP" [(ngModel)]="followData.Status" label="QC PROBLEM">
        </p-checkbox>
        <br>

        <p-checkbox name="groupname" value="QCPF" [(ngModel)]="followData.Status" label="QC PROBLEM FIXED">
        </p-checkbox>
        <br>

        <p-checkbox name="groupname" value="QCZ" [(ngModel)]="followData.Status" label="QC COMPLETE">
        </p-checkbox>
        <br>



        <div style="float: right; margin-top: 10px;">
            <button class="search-cmd" (click)="followSubmit()">Submit</button>
            <button class="search-cmd" style="margin-left: 10px;" (click)="activateWindow('')">Cancel</button>
        </div>
        <br><br>
        <p-progressBar class="ToolRunning" mode="indeterminate" [hidden]="!isSubmitting" title="Running..."></p-progressBar>

    </div>

</p-dialog>

<p-dialog *ngIf="completeData" header="Complete Work Order" [style]="{'width': '500px'}"
    [(visible)]="showWindow['COMPLETETOOL']" #overlayContainer>


    <div *ngIf="validationErrors?.InitError">
        <span style="color: red;">
            <div *ngIf="validationErrors?.InitError" class="Error"></div>The following Work Orders could not be updated
            due to one of the following reasons:
        </span>
        <ul>
            <li>The Status is COMPLETED IN GIS or CNFA</li>
            <li>It has not been Assigned</li>
            <li>You do not have the permission to edit this record</li>

        </ul>
        <p>
            <em>Invalid Order Number(s)</em><br>
            {{validationErrors?.InitError}}
        </p>
        <p>
            Please unselect those entries and try again.
        </p>

        <button class="search-cmd" (click)="showWindow = {}">Ok</button>
    </div>

    <div *ngIf="!validationErrors?.InitError">
        <div>Selected Issue(s) - {{completeData.checkedItems?.length}} Total</div>
        <span style="color: #336699">{{completeData.checkedItemsList}}</span>
        <div style="color: red" *ngIf="validationErrors?.Selected">
            <div *ngIf="validationErrors?.Selected" class="Error" [title]="validationErrors?.Selected"></div>No Work
            Order(s) were selected.
        </div>

        <div *ngIf="datasource == 'GAS' || datasource == 'LANDBASE'">
            <div [ngClass]="{'ErrorMsg' : validationErrors?.Hours}">
                <div *ngIf="validationErrors?.PostTime" class="Error" [title]="validationErrors?.PostTime"></div>
                Post Time
            </div>
            <div>
                <p-inputNumber [minFractionDigits]="2" [maxFractionDigits]="2" [(ngModel)]="completeData.PostTime"
                    mode="decimal"></p-inputNumber> hrs
            </div>
        </div>

        <div *ngIf="completeData.EnableNumberOfLots">
            <div [ngClass]="{'ErrorMsg' : validationErrors?.NumberOfLots}">
                <div *ngIf="validationErrors?.NumberOfLots" class="Error" [title]="validationErrors?.NumberOfLots">
                </div>
                <div *ngIf="datasource == 'GAS' || datasource=='LANDBASE'">Number of Lots</div>
                <div *ngIf="datasource == 'ELECTRIC'">Number of Street Lights
                </div>
            </div>
            <div>
                <p-inputNumber [minFractionDigits]="0" [maxFractionDigits]="0" [(ngModel)]="completeData.NumberOfLots"
                    mode="decimal"></p-inputNumber>
            </div>
        </div>

        <div [ngClass]="{'ErrorMsg' : validationErrors?.PerUnit}">
            <div *ngIf="validationErrors?.PerUnit" class="Error" [title]="validationErrors?.PerUnit"></div>

            <p-radioButton name="PerUnit" label="Per Unit" value="1" [(ngModel)]="completeData.PerUnit">
            </p-radioButton>

            <p-radioButton style="margin-left: 15px;" name="PerUnit" label="Hourly" value="0"
                [(ngModel)]="completeData.PerUnit"></p-radioButton>

        </div>

        <div *ngIf="completeData.EnableLowConfidence">
            <div style="margin-top: 10px;" [ngClass]="{'ErrorMsg' : validationErrors?.LowConfidence}">
                <div *ngIf="validationErrors?.LowConfidence" class="Error" [title]="validationErrors?.LowConfidence">
                </div>
                <p-checkbox name="LowConfidence" Label="Low Confidence?" [(ngModel)]="completeData.LowConfidence"
                    [binary]="true" inputId="LowConfidence">
                </p-checkbox>
                <label for="LowConfidence"> This is a Low Confidence Order</label>
            </div>

            <div *ngIf="completeData.LowConfidence">
                <div [ngClass]="{'ErrorMsg' : validationErrors?.LowConfidenceDescription}">
                    <div *ngIf="validationErrors?.LowConfidenceDescription" class="Error"
                        [title]="validationErrors?.LowConfidenceDescription"></div>
                    Low Confidence Description<span class="dialog-require"></span>
                </div>

                <p-dropdown styleClass="col-12" [appendTo]="overlayContainer"
                    [options]="completeData.LK_ConfidenceReason" [(ngModel)]="completeData.LowConfidenceDescription"
                    [optionLabel]="'Label'" [optionValue]="'Value'">
                </p-dropdown>

                <div [ngClass]="{'ErrorMsg' : validationErrors?.LowConfidenceRemark}">
                    <div *ngIf="validationErrors?.LowConfidenceRemark" class="Error"
                        [title]="validationErrors?.LowConfidenceRemark"></div>
                    Low Confidence Remarks<span class="dialog-require"></span>
                </div>
                <textarea pInputTextarea rows="3" style="width: 100%;"
                    [(ngModel)]="completeData.LowConfidenceRemark"></textarea>

                <div>
                    Attach File(s)<div class="HelpTip"
                            title="Acceptable file types include .zip, .dwg, .dgn, .tif, .pdf, .doc, .docx, .bmp & .jpg "></div>
                        
                </div>
                <div class="row mb-1">
                    <div class="col-12">
                        <p-fileUpload #AttachmentsRef name="attachments" multiple="multiple" [auto]="true" mode="basic"
                            chooseLabel="Browse" url="{{workOrderService._apiSourceUrl}}/AddTempAttachment"
                            accept=".dwg,.dxf,.dgn,.pdf,.ppt,.docx,.doc,.xlsx,.xls,image/*"
                            (onError)="onFileUploadError($event,AttachmentsRef)"
                            (onUpload)="addNewFileUploadSuccess($event,AttachmentsRef, completeData)">
                        </p-fileUpload>
                        <div *ngFor="let f of completeData.NewAttachments">
                            <a class="wraplongtext links" (click)="tempAttachmentDownload(f)">{{f.FileName}}</a>
                            <button class='row-cmd' title="Remove {{f.FileName}}" (click)="addNewRemoveAttachment(f.FileID, completeData)"
                                style="margin-top: -6px;">
                                <img src="assets/Images/row-icons/delete.png" />
                            </button>
        
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div *ngIf="completeData.EnableLowConfidenceFix">
            <div style="margin-top: 10px;" [ngClass]="{'ErrorMsg' : validationErrors?.LowConfidenceFix}">
                <div *ngIf="validationErrors?.LowConfidenceFix" class="Error" [title]="validationErrors?.LowConfidenceFix">
                </div>
                <p-checkbox name="LowConfidenceFix" Label="Low Confidence?" [(ngModel)]="completeData.LowConfidenceFix"
                    [binary]="true" inputId="LowConfidenceFix">
                </p-checkbox>
                <label for="LowConfidenceFix"> Fixed Low Confidence Order(s)</label>
            </div>

            <div *ngIf="completeData.LowConfidenceFix">
                <div [ngClass]="{'ErrorMsg' : validationErrors?.LowConfidenceRelate}">
                    <div *ngIf="validationErrors?.LowConfidenceRelate" class="Error"
                        [title]="validationErrors?.LowConfidenceRelate"></div>
                    Select Low Confidence Order(s) fixed by this order
                </div>

                <p-listbox [checkbox]="true" [multiple]="true" [options]="completeData.LK_LowConfidenceOrder"  [showToggleAll]="false" [(ngModel)]="completeData.LowConfidenceRelate" optionLabel="ORDERNUMBER"></p-listbox>


            </div>
        </div>
        <div style="float: right; margin-top: 10px;">
            <button class="search-cmd" (click)="completeToolSubmit()" [disabled]="isSubmitting">Submit</button>
            <button class="search-cmd" style="margin-left: 10px;" (click)="activateWindow('')">Cancel</button>
        </div>
        <br><br>
        <p-progressBar class="ToolRunning" mode="indeterminate" [hidden]="!isSubmitting" title="Running..."></p-progressBar>

    </div>
</p-dialog>

<p-dialog *ngIf="assignWorkOrderData" header="Assign Work Orders" [style]="{'width': '500px'}"
    [(visible)]="showWindow['ASSIGN']" #overlayContainer>

    <div *ngIf="validationErrors?.InitError">
        <span style="color: red;">
            <div *ngIf="validationErrors?.InitError" class="Error"></div>The following Work Orders could not be assigned
            due to one of the following reasons:
        </span>
        <ul>
            <li>The Status is other than RECEIVED or FIXED</li>
            <li>It has already been assigned</li>
            <li>You do not have the permission to edit this record</li>
        </ul>
        <p>
            <em>Invalid Order Number(s)</em><br>
            {{validationErrors?.InitError}}
        </p>
        <p>
            Please unselect those entries and try again.
        </p>

        <button class="search-cmd" (click)="showWindow = {}">Ok</button>
    </div>

    <div *ngIf="!validationErrors?.InitError">
        <div>Selected Issue(s) - {{assignWorkOrderData.checkedItems?.length}} Total</div>
        <span style="color: #336699">{{assignWorkOrderData.checkedItemsList}}</span>
        <div style="color: red" *ngIf="validationErrors?.Selected">
            <div *ngIf="validationErrors?.Selected" class="Error" [title]="validationErrors?.Selected"></div>No Work
            Order(s) were selected.
        </div>

        <div *ngIf="assignWorkOrderData.Submitted">
            <p>
            The selected work order(s) has been successfully assigned to 
            <span style="color: #336699;font-weight: bold;">{{assignWorkOrderData.SelectedEmployer.Label}}</span>
        </p>
        <p *ngIf="assignWorkOrderData.Packet > 0">
            The Packet Number <span style="color: #336699;font-weight: bold;">{{assignWorkOrderData.Packet}}</span> has been created.
        </p>
        <button class="search-cmd" (click)="showWindow = {}">Ok</button>

        </div>
        <div *ngIf="!assignWorkOrderData.Submitted">
        <div class="p-field-checkbox" style="margin-top: 5px; margin-bottom: 0px;">
            <p-checkbox name="MakePacket" Value="Y" [(ngModel)]="assignWorkOrderData.MakePacket" [binary]="true"
                inputId="MakePacket">
            </p-checkbox>
            <label for="MakePacket">Make Packet</label>
        </div>

        <div [ngClass]="{'ErrorMsg' : validationErrors?.AssignedTo}">
            <div *ngIf="validationErrors?.AssignedTo" class="Error" [title]="validationErrors?.AssignedTo"></div>
            Assigned To<span class="dialog-require"></span>
        </div>

        <p-dropdown styleClass="col-12" [options]="assignWorkOrderData.LK_Employer"
            [(ngModel)]="assignWorkOrderData.SelectedEmployer" [optionLabel]="'Label'"  [filter]="true"
            filterBy="Label" [showClear]="true" [virtualScroll]="true" [appendTo]="overlayContainer" itemSize="30">
        </p-dropdown>

        <div style="float: right; margin-top: 10px;">
            <button class="search-cmd" [disabled]="isSubmitting" (click)="assignWorkOrderToolSubmit()">Submit</button>
            <button class="search-cmd" style="margin-left: 10px;" (click)="activateWindow('')">Cancel</button>
        </div>
        <br><br>
        <p-progressBar class="ToolRunning" mode="indeterminate" [hidden]="!isSubmitting" title="Running..."></p-progressBar>

    </div>
    </div>
</p-dialog>

<p-dialog *ngIf="packetData" header="Edit Packet" [style]="{'width': '500px'}" [(visible)]="showWindow['PACKET']"
    #overlayContainer>

    <div *ngIf="validationErrors?.InitError">
        <span style="color: red;">
            <div *ngIf="validationErrors?.InitError" class="Error"></div>The following Work Orders could not be updated
            due to one of the following reasons:
        </span>
        <ul>
            <li>The Work Order is already COMPLETE or CLOSED (CNFA)</li>
            <li>You do not have the permission to edit this record</li>

        </ul>
        <p>
            <em>Invalid Order Number(s)</em><br>
            {{validationErrors?.InitError}}
        </p>
        <p>
            Please unselect those entries and try again.
        </p>

        <button class="search-cmd" (click)="showWindow = {}">Ok</button>
    </div>

    <div *ngIf="!validationErrors?.InitError">
        <div>Selected Issue(s) - {{packetData.checkedItems?.length}} Total</div>
        <span style="color: #336699">{{packetData.checkedItemsList}}</span>
        <div style="color: red" *ngIf="validationErrors?.Selected">
            <div *ngIf="validationErrors?.Selected" class="Error" [title]="validationErrors?.Selected"></div>No Work
            Order(s) were selected.
        </div>

        <div *ngIf="packetData.Submitted && packetData.Action != 'REMOVE'">
            The Packet Number <span style="color: #336699;font-weight: bold;">{{packetData.Packet}}</span> has been given to these selected Work Order(s).
            <br><button class="search-cmd" style="margin-top: 10px; float: right;" (click)="activateWindow('')">Close</button>
        </div>
    
        <div *ngIf="!packetData.Submitted">
            <div style="font-weight: bold;">Choose one of the options below: </div>
            <div>
                <p-radioButton (onClick)="defaultPacketInput()" name="PacketAction"
                    label="Add Item(s) To Another Packet" value="MOVE" [(ngModel)]="packetData.Action">
                </p-radioButton>
                <div *ngIf="packetData.Action == 'MOVE'" style="margin-left: 20px;">
                    <label style="margin-right: 5px;">Select Packet: </label>
                    <p-dropdown [options]="packetData.LK_Packet" [(ngModel)]="packetData.SelectedPacket"
                        [optionLabel]="'PACKET'" [filter]="true" filterBy="PACKET" [virtualScroll]="true"
                        [appendTo]="overlayContainer" itemSize="30">
                    </p-dropdown>
                </div>

            </div>
            <div>
                <p-radioButton name="PacketAction" label="Make a New Packet" value="NEW"
                    [(ngModel)]="packetData.Action">
                </p-radioButton>
            </div>
            <div>
                <p-radioButton name="PacketAction" label="Remove Item(s) from Packet" value="REMOVE"
                    [(ngModel)]="packetData.Action">
                </p-radioButton>
            </div>
        </div>

        <div *ngIf="!packetData.Submitted" style="float: right; margin-top: 10px;">
            <button class="search-cmd" [disabled]="isSubmitting" (click)="editPacketToolSubmit()">Submit</button>
            <button class="search-cmd" style="margin-left: 10px;" (click)="activateWindow('')">Cancel</button>
        </div>

        <br><br>
        <p-progressBar class="ToolRunning" mode="indeterminate" [hidden]="!isSubmitting" title="Running..."></p-progressBar>

    </div>
</p-dialog>


<p-dialog *ngIf="deleteData" class="warningDialog" header="Delete Work Order" [style]="{'width': '500px'}"
    [(visible)]="showWindow['DELETE']" #overlayContainer>

    <div *ngIf="!validationErrors?.InitError">
        <div>Selected Issue(s) - {{deleteData.checkedItems?.length}} Total</div>
        <span style="color: #336699">{{deleteData.checkedItemsList}}</span>
        <div style="color: red" *ngIf="validationErrors?.Selected">
            <div *ngIf="validationErrors?.Selected" class="Error" [title]="validationErrors?.Selected"></div>No Work
            Order(s) were selected.
        </div>

        <label *ngIf="!validationErrors?.Selected" style="color: red; font-weight: bold;">The following workorders will
            be permanently deleted. Are you sure you want to continue? </label>

        <div style="float: right; margin-top: 10px;">
            <button class="search-cmd" (click)="deleteSubmit()">Yes</button>
            <button class="search-cmd" style="margin-left: 10px;" (click)="activateWindow('')">No / Cancel</button>
        </div>

    </div>
</p-dialog>

<p-dialog *ngIf="problemData" header="Problem Work Order" [style]="{'width': '500px'}"
    [(visible)]="showWindow['PROBLEMTOOL']" #overlayContainer>


    <div *ngIf="validationErrors?.InitError">
        <span style="color: red;">
            <div *ngIf="validationErrors?.InitError" class="Error"></div>The following Work Orders could not be updated
            due to one of the following reasons:
        </span>
        <ul>
            <li>The Status is COMPLETED IN GIS or CNFA</li>
            <li>It has not been Assigned</li>
            <li>You do not have the permission to edit this record</li>

        </ul>
        <p>
            <em>Invalid Order Number(s)</em><br>
            {{validationErrors?.InitError}}
        </p>
        <p>
            Please unselect those entries and try again.
        </p>

        <button class="search-cmd" (click)="showWindow = {}">Ok</button>
    </div>

    <div *ngIf="!validationErrors?.InitError">
        <div>Selected Issue(s) - {{problemData.checkedItems?.length}} Total</div>
        <span style="color: #336699">{{problemData.checkedItemsList}}</span>
        <div style="color: red" *ngIf="validationErrors?.Selected">
            <div *ngIf="validationErrors?.Selected" class="Error" [title]="validationErrors?.Selected"></div>No Work
            Order(s) were selected.
        </div>

        <div [ngClass]="{'ErrorMsg' : validationErrors?.ProblemDescription}">
            <div *ngIf="validationErrors?.ProblemDescription" class="Error"
                [title]="validationErrors?.ProblemDescription"></div>
            Problem Description<span class="dialog-require"></span>
        </div>
        <p-dropdown styleClass="col-12" [appendTo]="overlayContainer" [options]="problemData.LK_ProblemDescription"
            [(ngModel)]="problemData.ProblemDescription" [optionLabel]="'Label'" [optionValue]="'Value'">
        </p-dropdown>

        <div [ngClass]="{'ErrorMsg' : validationErrors?.Remarks}">
            <div *ngIf="validationErrors?.Remarks" class="Error" [title]="validationErrors?.Remarks"></div>
            Problem Remarks
        </div>
        <textarea pInputTextarea rows="3" style="width: 100%;" [(ngModel)]="problemData.Remarks"></textarea>

        <div class="row mb-1">
            <div class="col-6">
                <div *ngIf="validationErrors?.XCoord" class="Error" [title]="validationErrors?.XCoord"></div>
                X Coordinate
                <input type="text" style="width: 100%;" styleClass="col-6" pInputText [(ngModel)]="problemData.XCoord">
            </div>
            <div class="col-6">
                <div *ngIf="validationErrors?.YCoord" class="Error" [title]="validationErrors?.YCoord"></div>
                Y Coordinate
                <input type="text" style="width: 100%;" styleClass="col-6" pInputText [(ngModel)]="problemData.YCoord">
            </div>
        </div>

        <div class="row mb-1">
            <label class="col-12">Attach File(s)<div class="HelpTip"
                    title="Acceptable file types include .zip, .dwg, .dgn, .tif, .pdf, .doc, .docx, .bmp & .jpg "></div>
                </label>
        </div>
        <div class="row mb-1">
            <div class="col-12">
                <p-fileUpload #AttachmentsRef name="attachments" multiple="multiple" [auto]="true" mode="basic"
                    chooseLabel="Browse" url="{{workOrderService._apiSourceUrl}}/AddTempAttachment"
                    accept=".dwg,.dxf,.dgn,.pdf,.ppt,.docx,.doc,.xlsx,.xls,image/*"
                    (onError)="onFileUploadError($event,AttachmentsRef)"
                    (onUpload)="addNewFileUploadSuccess($event,AttachmentsRef, problemData)">
                </p-fileUpload>
                <div *ngFor="let f of problemData.NewAttachments">
                    <a class="wraplongtext links" (click)="tempAttachmentDownload(f)">{{f.FileName}}</a>
                    <button class='row-cmd' title="Remove {{f.FileName}}" (click)="addNewRemoveAttachment(f.FileID, problemData)"
                        style="margin-top: -6px;">
                        <img src="assets/Images/row-icons/delete.png" />
                    </button>

                </div>
            </div>
        </div>

        <div style="float: right; margin-top: 10px;">
            <button class="search-cmd" [disabled]="isSubmitting" (click)="problemToolSubmit()">Submit</button>
            <button class="search-cmd" style="margin-left: 10px;" (click)="activateWindow('')">Cancel</button>
        </div>
        <br>
        <p-progressBar class="ToolRunning" mode="indeterminate" [hidden]="!isSubmitting" title="Running..."></p-progressBar>

    </div>
</p-dialog>

<p-dialog *ngIf="qcData && showWindow['QCASSIGN']" header="Assign Work Orders for QC" [style]="{'width': '500px'}"
    [(visible)]="showWindow['QCASSIGN']" #overlayContainer>


    <div *ngIf="validationErrors?.InitError">
        <span style="color: red;">
            <div *ngIf="validationErrors?.InitError" class="Error"></div>The following Work Orders could not be updated
            due to one of the following reasons:
        </span>
        <ul>
            <li>The Status is not COMPLETED IN GIS</li>
            <li>The QC Status is already QC COMPLETED</li>
            <li>You do not have the permission to edit this record</li>

        </ul>
        <p>
            <em>Invalid Order Number(s)</em><br>
            {{validationErrors?.InitError}}
        </p>
        <p>
            Please unselect those entries and try again.
        </p>

        <button class="search-cmd" (click)="showWindow = {}">Ok</button>
    </div>

    <div *ngIf="!validationErrors?.InitError">
        <div>Selected Issue(s) - {{qcData.checkedItems?.length}} Total</div>
        <span style="color: #336699">{{qcData.checkedItemsList}}</span>
        <div style="color: red" *ngIf="validationErrors?.Selected">
            <div *ngIf="validationErrors?.Selected" class="Error" [title]="validationErrors?.Selected"></div>No Work
            Order(s) were selected.
        </div>

        <div [ngClass]="{'ErrorMsg' : validationErrors?.Employer}">
            <div *ngIf="validationErrors?.Employer" class="Error" [title]="validationErrors?.Employer"></div>
            Employer<span class="dialog-require"></span>
        </div>
        <p-dropdown styleClass="col-12" [appendTo]="overlayContainer" [options]="qcData.LK_Employer"
            [(ngModel)]="qcData.Employer" [optionLabel]="'Label'" [optionValue]="'Value'">
        </p-dropdown>


        <div style="float: right; margin-top: 10px;">
            <button class="search-cmd" [disabled]="isSubmitting" (click)="qcAssignSubmit()">Submit</button>
            <button class="search-cmd" style="margin-left: 10px;" (click)="activateWindow('')">Cancel</button>
        </div>
        <br><br>
        <p-progressBar class="ToolRunning" mode="indeterminate" [hidden]="!isSubmitting" title="Running..."></p-progressBar>

    </div>
</p-dialog>


<p-dialog *ngIf="qcData && showWindow['QCPROBLEM']" header="Assign Work Orders for QC" [style]="{'width': '500px'}"
    [(visible)]="showWindow['QCPROBLEM']" #overlayContainer>


    <div *ngIf="validationErrors?.InitError">
        <span style="color: red;">
            <div *ngIf="validationErrors?.InitError" class="Error"></div>The following Work Orders could not be updated
            due to one of the following reasons:
        </span>
        <ul>
            <li>The Status is not COMPLETED IN GIS</li>
            <li>The QC Status is already QC COMPLETED</li>
            <li>You do not have the permission to edit this record</li>

        </ul>
        <p>
            <em>Invalid Order Number(s)</em><br>
            {{validationErrors?.InitError}}
        </p>
        <p>
            Please unselect those entries and try again.
        </p>

        <button class="search-cmd" (click)="showWindow = {}">Ok</button>
    </div>

    <div *ngIf="!validationErrors?.InitError">
        <div>Selected Issue(s) - {{qcData.checkedItems?.length}} Total</div>
        <span style="color: #336699">{{qcData.checkedItemsList}}</span>
        <div style="color: red" *ngIf="validationErrors?.Selected">
            <div *ngIf="validationErrors?.Selected" class="Error" [title]="validationErrors?.Selected"></div>No Work
            Order(s) were selected.
        </div>

        <div [ngClass]="{'ErrorMsg' : validationErrors?.Description}">
            <div *ngIf="validationErrors?.Description" class="Error" [title]="validationErrors?.Description"></div>
            QC Description<span class="dialog-require"></span>
        </div>
        <p-dropdown styleClass="col-12" [appendTo]="overlayContainer" [options]="qcData.LK_Description"
            [(ngModel)]="qcData.Description" [optionLabel]="'Label'" [optionValue]="'Value'">
        </p-dropdown>

        <div>
            <p-radioButton name="Fixed" label="Checker Didn't Fix Problems" value="NO" [(ngModel)]="qcData.Fixed">
            </p-radioButton>
            <p-radioButton name="Fixed" label="Checker Fixed Problems" value="YES" [(ngModel)]="qcData.Fixed">
            </p-radioButton>
        </div>

        <div [ngClass]="{'ErrorMsg' : validationErrors?.Remarks}">
            <div *ngIf="validationErrors?.Remarks" class="Error" [title]="validationErrors?.Remarks"></div>
            QC Remarks
        </div>
        <textarea pInputTextarea rows="3" style="width: 100%;" [(ngModel)]="qcData.Remarks"></textarea>

        <div style="float: right; margin-top: 10px;">
            <button class="search-cmd" (click)="qcProblemSubmit()" [disabled]="isSubmitting">Submit</button>
            <button class="search-cmd" style="margin-left: 10px;" (click)="activateWindow('')">Cancel</button>
        </div>
        <br><br>
        <p-progressBar class="ToolRunning" mode="indeterminate" [hidden]="!isSubmitting" title="Running..."></p-progressBar>

    </div>
</p-dialog>

<p-dialog *ngIf="qcData && showWindow['QCCOMPLETE']" header="QC Complete Work Orders" [style]="{'width': '500px'}"
    [(visible)]="showWindow['QCCOMPLETE']" #overlayContainer>


    <div *ngIf="validationErrors?.InitError">
        <span style="color: red;">
            <div *ngIf="validationErrors?.InitError" class="Error"></div>The following Work Orders could not be updated
            due to one of the following reasons:
        </span>
        <ul>
            <li>The Status is not COMPLETED IN GIS</li>
            <li>The QC Status is already QC COMPLETED</li>
            <li>You do not have the permission to edit this record</li>

        </ul>
        <p>
            <em>Invalid Order Number(s)</em><br>
            {{validationErrors?.InitError}}
        </p>
        <p>
            Please unselect those entries and try again.
        </p>

        <button class="search-cmd" (click)="showWindow = {}">Ok</button>
    </div>

    <div *ngIf="!validationErrors?.InitError">
        <div>Selected Issue(s) - {{qcData.checkedItems?.length}} Total</div>
        <span style="color: #336699">{{qcData.checkedItemsList}}</span>
        <div style="color: red" *ngIf="validationErrors?.Selected">
            <div *ngIf="validationErrors?.Selected" class="Error" [title]="validationErrors?.Selected"></div>No Work
            Order(s) were selected.
        </div>


        <div [ngClass]="{'ErrorMsg' : validationErrors?.Remarks}">
            <div *ngIf="validationErrors?.Remarks" class="Error" [title]="validationErrors?.Remarks"></div>
            QC Remarks
        </div>
        <textarea pInputTextarea rows="3" style="width: 100%;" [(ngModel)]="qcData.Remarks"></textarea>

        <div style="float: right; margin-top: 10px;">
            <button class="search-cmd" (click)="qcCompleteSubmit()" [disabled]="isSubmitting">Submit</button>
            <button class="search-cmd" style="margin-left: 10px;" (click)="activateWindow('')">Cancel</button>
        </div>
        <br><br>
        <p-progressBar class="ToolRunning" mode="indeterminate" [hidden]="!isSubmitting" title="Running..."></p-progressBar>

    </div>
</p-dialog>


<p-dialog *ngIf="qcData && showWindow['QCPROBLEMFIXED']" header="QC Problem Fixed" [style]="{'width': '500px'}"
    [(visible)]="showWindow['QCPROBLEMFIXED']" #overlayContainer>


    <div *ngIf="validationErrors?.InitError">
        <span style="color: red;">
            <div *ngIf="validationErrors?.InitError" class="Error"></div>The following Work Orders could not be updated
            due to one of the following reasons:
        </span>
        <ul>
            <li>The Status is not COMPLETED IN GIS</li>
            <li>The QC Status is already QC COMPLETED</li>
            <li>You do not have the permission to edit this record</li>

        </ul>
        <p>
            <em>Invalid Order Number(s)</em><br>
            {{validationErrors?.InitError}}
        </p>
        <p>
            Please unselect those entries and try again.
        </p>

        <button class="search-cmd" (click)="showWindow = {}">Ok</button>
    </div>

    <div *ngIf="!validationErrors?.InitError">
        <div>Selected Issue(s) - {{qcData.checkedItems?.length}} Total</div>
        <span style="color: #336699">{{qcData.checkedItemsList}}</span>
        <div style="color: red" *ngIf="validationErrors?.Selected">
            <div *ngIf="validationErrors?.Selected" class="Error" [title]="validationErrors?.Selected"></div>No Work
            Order(s) were selected.
        </div>

        <div [ngClass]="{'ErrorMsg' : validationErrors?.Remarks}">
            <div *ngIf="validationErrors?.Remarks" class="Error" [title]="validationErrors?.Remarks"></div>
            QC Problem Fixed Remarks
        </div>
        <textarea pInputTextarea rows="3" style="width: 100%;" [(ngModel)]="qcData.Remarks"></textarea>



        <div style="float: right; margin-top: 10px;">
            <button class="search-cmd" (click)="qcProblemFixedSubmit()" [disabled]="isSubmitting">Submit</button>
            <button class="search-cmd" style="margin-left: 10px;" (click)="activateWindow('')">Cancel</button>
        </div>
        <br><br>
        <p-progressBar class="ToolRunning" mode="indeterminate" [hidden]="!isSubmitting" title="Running..."></p-progressBar>

    </div>
</p-dialog>


<p-dialog *ngIf="assignProjectData" header="Assign Project for Work Order" [style]="{'width': '500px'}"
    [(visible)]="showWindow['PROJECT']" #overlayContainer>


    <div *ngIf="validationErrors?.InitError">
        <span style="color: red;">
            <div *ngIf="validationErrors?.InitError" class="Error"></div>The following Work Orders could not be updated
            due to one of the following reasons:
        </span>
        <ul>
            <li>The Status is COMPLETED IN GIS or CNFA</li>
            <li>It has not been Assigned</li>
            <li>You do not have the permission to edit this record</li>

        </ul>
        <p>
            <em>Invalid Order Number(s)</em><br>
            {{validationErrors?.InitError}}
        </p>
        <p>
            Please unselect those entries and try again.
        </p>

        <button class="search-cmd" (click)="showWindow = {}">Ok</button>
    </div>

    <div *ngIf="!validationErrors?.InitError">
        <div>Selected Issue(s) - {{assignProjectData.checkedItems?.length}} Total</div>
        <span style="color: #336699">{{assignProjectData.checkedItemsList}}</span>
        <div style="color: red" *ngIf="validationErrors?.Selected">
            <div *ngIf="validationErrors?.Selected" class="Error" [title]="validationErrors?.Selected"></div>No Work
            Order(s) were selected.
        </div>

        <div style="margin-top: 5px;" [ngClass]="{'ErrorMsg' : validationErrors?.Jurisidction}">
            <div *ngIf="validationErrors?.Jurisidction" class="Error" [title]="validationErrors?.ProblemDescription">
            </div>
            Jurisidction<span class="dialog-require"></span>
        </div>
        <p-dropdown styleClass="col-12" [appendTo]="overlayContainer" [options]="assignProjectData.LK_Jurisdiction"
            (onChange)="assignProject_JurisdictionChange()" [(ngModel)]="assignProjectData.Jurisdiction"
            [optionLabel]="'Label'" [optionValue]="'Value'">
        </p-dropdown>


        <div style="margin-top: 5px;" [ngClass]="{'ErrorMsg' : validationErrors?.Project}">
            <div *ngIf="validationErrors?.Project" class="Error" [title]="validationErrors?.Project"></div>
            Project<span class="dialog-require"></span>
        </div>
        <p-dropdown styleClass="col-12" [appendTo]="overlayContainer" [options]="assignProjectData.LK_Project"
            [(ngModel)]="assignProjectData.SelectedProject" [optionLabel]="'Label'">
        </p-dropdown>


        <div style="margin-top: 5px;" [ngClass]="{'ErrorMsg' : validationErrors?.City}">
            <div *ngIf="validationErrors?.City" class="Error" [title]="validationErrors?.City"></div>
            City<span class="dialog-require"></span>
        </div>
        <p-dropdown styleClass="col-12" [appendTo]="overlayContainer" [options]="assignProjectData.LK_City"
            [(ngModel)]="assignProjectData.City" [optionLabel]="'Label'" [optionValue]="'Value'">
        </p-dropdown>


        <div style="margin-top: 5px;" [ngClass]="{'ErrorMsg' : validationErrors?.ProjectCompletionDate}">
            <div *ngIf="validationErrors?.ProjectCompletionDate" class="Error"
                [title]="validationErrors?.ProjectCompletionDate"></div>
            Project Completion Date<span class="dialog-require"></span>
        </div>
        <p-calendar styleClass="col-12" [(ngModel)]="assignProjectData.ProjectCompletionDate" dateFormat="mm/dd/yy"
            dataType="string" [appendTo]="overlayContainer"></p-calendar>


        <div style="margin-top: 5px;" [ngClass]="{'ErrorMsg' : validationErrors?.Assign}">
            <div *ngIf="validationErrors?.Assign" class="Error" [title]="validationErrors?.Assign"></div>
            Assign Project To:<span class="dialog-require"></span>
        </div>
        <div>
            <p-radioButton name="Assign" label="Batch Number(s) {{assignProjectData.BatchList}} " value="Batch"
                [(ngModel)]="assignProjectData.Assign">
            </p-radioButton>
        </div>
        <div>
            <p-radioButton name="Assign" label="Only This Work Order" value="WorkOrder"
                [(ngModel)]="assignProjectData.Assign">
            </p-radioButton>
        </div>


        <div style="float: right; margin-top: 10px;">
            <button class="search-cmd" (click)="assignProjectToolSubmit()" [disabled]="isSubmitting">Submit</button>
            <button class="search-cmd" style="margin-left: 10px;" (click)="activateWindow('')">Cancel</button>
        </div>
        <br><br>
        <p-progressBar class="ToolRunning" mode="indeterminate" [hidden]="!isSubmitting" title="Running..."></p-progressBar>

    </div>
</p-dialog>

<p-dialog *ngIf="holdData" header="On Hold Work Orders" [style]="{'width': '500px'}" [(visible)]="showWindow['HOLD']"
    #overlayContainer>


    <div *ngIf="validationErrors?.InitError">
        <span style="color: red;">
            <div *ngIf="validationErrors?.InitError" class="Error"></div>The following Work Orders could not be updated
            due to one of the following reasons:
        </span>
        <ul>
            <li>The Status is COMPLETED IN GIS or CNFA</li>
            <li>It has not been Assigned</li>
            <li>You do not have the permission to edit this record</li>
        </ul>
        <p>
            <em>Invalid Order Number(s)</em><br>
            {{validationErrors?.InitError}}
        </p>
        <p>
            Please unselect those entries and try again.
        </p>

        <button class="search-cmd" (click)="showWindow = {}">Ok</button>
    </div>

    <div *ngIf="!validationErrors?.InitError">
        <div>Selected Issue(s) - {{holdData.checkedItems?.length}} Total</div>
        <span style="color: #336699">{{holdData.checkedItemsList}}</span>
        <div style="color: red" *ngIf="validationErrors?.Selected">
            <div *ngIf="validationErrors?.Selected" class="Error" [title]="validationErrors?.Selected"></div>No Work
            Order(s) were selected.
        </div>


        <div [ngClass]="{'ErrorMsg' : validationErrors?.Action}">
            <div *ngIf="validationErrors?.Action" class="Error" [title]="validationErrors?.Action"></div>
            Select Action To Perform
        </div>
        <div>
            <p-radioButton name="releaseAction" label="Release Service Order - Set Status to WOTS FIXED"
                value="WOTS FIXED" [(ngModel)]="holdData.Action">
            </p-radioButton>
        </div>
        <div>
            <p-radioButton name="releaseAction" label="Cancel Service Order - Set Status to WOTS FILENET ERROR"
                value="WOTS FILENET ERROR" [(ngModel)]="holdData.Action">
            </p-radioButton>
        </div>
        <div style="float: right; margin-top: 10px;">
            <button class="search-cmd" (click)="holdToolSubmit()" [disabled]="isSubmitting">Submit</button>
            <button class="search-cmd" style="margin-left: 10px;" (click)="activateWindow('')">Cancel</button>
        </div>
        <br><br>
        <p-progressBar class="ToolRunning" mode="indeterminate" [hidden]="!isSubmitting" title="Running..."></p-progressBar>

    </div>
</p-dialog>
<p-dialog *ngIf="relatedOrderData" header="Receive Related Order" [style]="{'width': '500px'}"
    [(visible)]="showWindow['RELATED']" #overlayContainer>


    <div *ngIf="validationErrors?.InitError">
        <span style="color: red;">
            <div *ngIf="validationErrors?.InitError" class="Error"></div>The following Work Orders could not be updated
            due to one of the following reasons:
        </span>
        <ul>
            <li>You do not have the permission to edit this record</li>
            <li></li>
        </ul>
        <p>
            <em>Invalid Order Number(s)</em><br>
            {{validationErrors?.InitError}}
        </p>
        <p>
            Please unselect those entries and try again.
        </p>

        <button class="search-cmd" (click)="showWindow = {}">Ok</button>
    </div>

    <div *ngIf="!validationErrors?.InitError">
        <div>Selected Issue(s) - {{relatedOrderData.checkedItems?.length}} Total</div>
        <span style="color: #336699">{{relatedOrderData.checkedItemsList}}</span>
        <div style="color: red" *ngIf="validationErrors?.Selected">
            <div *ngIf="validationErrors?.Selected" class="Error" [title]="validationErrors?.Selected"></div>No Work
            Order(s) were selected.
        </div>

        <div [ngClass]="{'ErrorMsg' : validationErrors?.RelatedReason}">
            <div *ngIf="validationErrors?.RelatedReason" class="Error" [title]="validationErrors?.RelatedReason"></div>
            Related Reason<span class="dialog-require"></span>
        </div>
        <p-dropdown styleClass="col-12" [appendTo]="overlayContainer" [options]="relatedOrderData.LK_RelatedReason"
            [(ngModel)]="relatedOrderData.RelatedReason" [optionLabel]="'Label'" [optionValue]="'Value'">
        </p-dropdown>


        <div style="float: right; margin-top: 10px;">
            <button class="search-cmd" (click)="relatedOrderToolSubmit()" [disabled]="isSubmitting">Submit</button>
            <button class="search-cmd" style="margin-left: 10px;" (click)="activateWindow('')">Cancel</button>
        </div>
        <br><br>
        <p-progressBar class="ToolRunning" mode="indeterminate" [hidden]="!isSubmitting" title="Running..."></p-progressBar>

    </div>
</p-dialog>

<p-dialog *ngIf="closedProblemData" header="Closed Problem Work Orders" [style]="{'width': '500px'}"
    [(visible)]="showWindow['CLOSEDPROBLEM']" #overlayContainer>

    <div *ngIf="validationErrors?.InitError">
        <span style="color: red;">
            <div *ngIf="validationErrors?.InitError" class="Error"></div>The following Work Orders could not be updated
            due to one of the following reasons:
        </span>
        <ul>
            <li>It is not an actual PROBLEM status</li>
            <li>You do not have the permission to edit this record</li>
        </ul>
        <p>
            <em>Invalid Order Number(s)</em><br>
            {{validationErrors?.InitError}}
        </p>
        <p>
            Please unselect those entries and try again.
        </p>

        <button class="search-cmd" (click)="showWindow = {}">Ok</button>
    </div>
    <div *ngIf="!validationErrors?.InitError">
        <div>Selected Issue(s) - {{closedProblemData.checkedItems?.length}} Total</div>
        <span style="color: #336699">{{closedProblemData.checkedItemsList}}</span>
        <div style="color: red" *ngIf="validationErrors?.Selected">
            <div *ngIf="validationErrors?.Selected" class="Error" [title]="validationErrors?.Selected"></div>No Work
            Order(s) were selected.
        </div>

        <div [ngClass]="{'ErrorMsg' : validationErrors?.ProblemDescription}">
            <span style="color: red; font-size: 14px">
                If there are multiple selected orders with different Problem Descriptions, selecting a Problem Description value will update all the order(s) to the same Problem Description.
                </span>
                <br>
                <div *ngIf="validationErrors?.ProblemDescription" class="Error"
                [title]="validationErrors?.ProblemDescription"></div>
            Problem Description
        </div>
        <p-dropdown styleClass="col-12" [appendTo]="overlayContainer" [options]="closedProblemData.LK_ProblemDescription"
            [(ngModel)]="closedProblemData.ProblemDescription" [optionLabel]="'Label'" [optionValue]="'Value'">
        </p-dropdown>

        <div [ngClass]="{'ErrorMsg' : validationErrors?.Remarks}">
            <div *ngIf="validationErrors?.Remarks" class="Error" [title]="validationErrors?.Remarks"></div>
            Problem Remarks
        </div>
        <textarea pInputTextarea rows="3" style="width: 100%;" [(ngModel)]="closedProblemData.Remarks"></textarea>


        <div style="float: right; margin-top: 10px;">
            <button class="search-cmd" (click)="closedProblemToolSubmit()" [disabled]="isSubmitting">Submit</button>
            <button class="search-cmd" style="margin-left: 10px;" (click)="activateWindow('')">Cancel</button>
        </div>
        <br><br>
        <p-progressBar class="ToolRunning" mode="indeterminate" [hidden]="!isSubmitting" title="Running..."></p-progressBar>

    </div>
</p-dialog>


<p-dialog *ngIf="reOpenData" header="Re-open Work Orders" [style]="{'width': '500px'}"
    [(visible)]="showWindow['REOPEN']" #overlayContainer>

    <div *ngIf="validationErrors?.InitError">
        <span style="color: red;">
            <div *ngIf="validationErrors?.InitError" class="Error"></div>The following Work Orders could not be updated
            due to one of the following reasons:
        </span>
        <ul>
            <li>The status is not COMPLETE or CNFA</li>
            <li>You do not have the permission to edit this record</li>
        </ul>
        <p>
            <em>Invalid Order Number(s)</em><br>
            {{validationErrors?.InitError}}
        </p>
        <p>
            Please unselect those entries and try again.
        </p>

        <button class="search-cmd" (click)="showWindow = {}">Ok</button>
    </div>
    <div *ngIf="!validationErrors?.InitError">
        <div>Selected Issue(s) - {{reOpenData.checkedItems?.length}} Total</div>
        <span style="color: #336699">{{reOpenData.checkedItemsList}}</span>
        <div style="color: red" *ngIf="validationErrors?.Selected">
            <div *ngIf="validationErrors?.Selected" class="Error" [title]="validationErrors?.Selected"></div>No Work
            Order(s) were selected.
        </div>

        <div [ngClass]="{'ErrorMsg' : validationErrors?.VendorComment}">
            <div *ngIf="validationErrors?.VendorComment" class="Error" [title]="validationErrors?.VendorComment"></div>
            Vendor Comment
        </div>
        <textarea pInputTextarea rows="3" style="width: 100%;" [(ngModel)]="reOpenData.VendorComment"></textarea>


        <div style="float: right; margin-top: 10px;">
            <button class="search-cmd" (click)="reOpenToolSubmit()" [disabled]="isSubmitting">Submit</button>
            <button class="search-cmd" style="margin-left: 10px;" (click)="activateWindow('')">Cancel</button>
        </div>
        <br><br>
        <p-progressBar class="ToolRunning" mode="indeterminate" [hidden]="!isSubmitting" title="Running..."></p-progressBar>

    </div>
</p-dialog>


<p-dialog *ngIf="sentReceivedData" [header]="sentReceivedData?.DialogTitle" [style]="{'width': '500px'}"
    [(visible)]="showWindow['SENTRECEIVED']" #overlayContainer>



    <div *ngIf="validationErrors?.InitError">
        <span style="color: red;">
            <div *ngIf="validationErrors?.InitError" class="Error"></div>The following Work Orders could not be updated
            due to one of the following reasons:
        </span>
        <ul>
            <li *ngIf="sentReceivedData.Mode == 'SENT'">The Status is not PROBLEM or FIXED</li>
            <li *ngIf="sentReceivedData.Mode == 'RECEIVED'">The Status is not PROBLEM</li>
        </ul>
        <p>
            <em>Invalid Order Number(s)</em><br>
            {{validationErrors?.InitError}}
        </p>
        <p>
            Please unselect those entries and try again.
        </p>

        <button class="search-cmd" (click)="showWindow = {}">Ok</button>
    </div>


    <div *ngIf="!validationErrors?.InitError">
        <div>Selected Issue(s) - {{sentReceivedData.checkedItems?.length}} Total</div>
        <span style="color: #336699">{{sentReceivedData.checkedItemsList}}</span>
        <div style="color: red" *ngIf="validationErrors?.Selected">
            <div *ngIf="validationErrors?.Selected" class="Error" [title]="validationErrors?.Selected"></div>No Work
            Order(s) were selected.
        </div>

        <div *ngIf="sentReceivedData.Mode == 'SENT'">
            The following work order(s) will be set to Sent Back for more information from the field.
        </div>

        <div *ngIf="sentReceivedData.Mode == 'RECEIVED'">
            The following work order(s) will be set to Received Back From Field. These work order will need to be
            re-assigned.
        </div>

        <div style="float: right; margin-top: 10px;">
            <button class="search-cmd" (click)="sentReceivedToolSubmit()" [disabled]="isSubmitting">Submit</button>
            <button class="search-cmd" style="margin-left: 10px;" (click)="activateWindow('')">Cancel</button>
        </div>
        <br><br>
        <p-progressBar class="ToolRunning" mode="indeterminate" [hidden]="!isSubmitting" title="Running..."></p-progressBar>

    </div>
</p-dialog>


<p-dialog *ngIf="postableData" header="Make Work Order Postable" [style]="{'width': '500px'}"
    [(visible)]="showWindow['POSTABLE']" #overlayContainer>



    <div *ngIf="validationErrors?.InitError">
        <span style="color: red;">
            <div *ngIf="validationErrors?.InitError" class="Error"></div>The following Work Orders could not be updated
            due to one of the following reasons:
        </span>
        <ul>
            <li>The Status is not PROBLEM</li>
            <li>You do not have the permission to edit this record</li>
        </ul>
        <p>
            <em>Invalid Order Number(s)</em><br>
            {{validationErrors?.InitError}}
        </p>
        <p>
            Please unselect those entries and try again.
        </p>

        <button class="search-cmd" (click)="showWindow = {}">Ok</button>
    </div>


    <div *ngIf="!validationErrors?.InitError">
        <div>Selected Issue(s) - {{postableData.checkedItems?.length}} Total</div>
        <span style="color: #336699">{{postableData.checkedItemsList}}</span>
        <div style="color: red" *ngIf="validationErrors?.Selected">
            <div *ngIf="validationErrors?.Selected" class="Error" [title]="validationErrors?.Selected"></div>No Work
            Order(s) were selected.
        </div>

        <div [ngClass]="{'ErrorMsg' : validationErrors?.VendorComment}">
            Comments</div>
        <textarea pInputTextarea rows="3" style="width: 100%;" [(ngModel)]="postableData.VendorComment"></textarea>


        <div style="float: right; margin-top: 10px;">
            <button class="search-cmd" (click)="postableToolSubmit()" [disabled]="isSubmitting">Submit</button>
            <button class="search-cmd" style="margin-left: 10px;" (click)="activateWindow('')">Cancel</button>
        </div>
        <br><br>
        <p-progressBar class="ToolRunning" mode="indeterminate" [hidden]="!isSubmitting" title="Running..."></p-progressBar>

    </div>
</p-dialog>

<p-dialog *ngIf="CNFAData" header="Closed No Further Action" [style]="{'width': '500px'}"
    [(visible)]="showWindow['CNFA']" #overlayContainer>


    <div *ngIf="validationErrors?.InitError">
        <span style="color: red;">
            <div *ngIf="validationErrors?.InitError" class="Error"></div>The following Work Orders could not be updated
            due to one of the following reasons:
        </span>
        <ul>
            <li>The Status is not a PROBLEM or CLOSED PROBLEM</li>
            <li>You do not have the permission to edit this record</li>
        </ul>
        <p>
            <em>Invalid Order Number(s)</em><br>
            {{validationErrors?.InitError}}
        </p>
        <p>
            Please unselect those entries and try again.
        </p>

        <button class="search-cmd" (click)="showWindow = {}">Ok</button>
    </div>

    <div *ngIf="!validationErrors?.InitError">
        <div>Selected Issue(s) - {{CNFAData.checkedItems?.length}} Total</div>
        <span style="color: #336699">{{CNFAData.checkedItemsList}}</span>
        <div style="color: red" *ngIf="validationErrors?.Selected">
            <div *ngIf="validationErrors?.Selected" class="Error" [title]="validationErrors?.Selected"></div>No Work
            Order(s) were selected.
        </div>

        <div [ngClass]="{'ErrorMsg' : validationErrors?.Remarks}">
            Remarks</div>
        <textarea pInputTextarea rows="3" style="width: 100%;" [(ngModel)]="CNFAData.Remarks"></textarea>


        <div style="float: right; margin-top: 10px;">
            <button class="search-cmd" (click)="CNFAToolSubmit()" [disabled]="isSubmitting">Submit</button>
            <button class="search-cmd" style="margin-left: 10px;" (click)="activateWindow('')">Cancel</button>
        </div>
        <br><br>
        <p-progressBar class="ToolRunning" mode="indeterminate" [hidden]="!isSubmitting" title="Running..."></p-progressBar>

    </div>
</p-dialog>